<div class="inventory-container">
  <h1 class="text-2xl font-bold mb-6">Inventory</h1>

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    <!-- Add Clothes Form -->
    <div class="space-y-4">
      <div>
        <h2 class="text-xl font-semibold mb-1">Add New Clothes</h2>
        <p class="text-sm text-base-content/70">
          Fill in the details to add a new clothing item to your inventory.
        </p>
      </div>

      <div class="card bg-base-100 shadow-md">
        <div class="card-body p-6">
        <form [formGroup]="clothesForm" (ngSubmit)="insertClothes()" class="space-y-6">
          <div class="space-y-2">
            <app-photo-manager
              (fileChange)="onPhotoFileChange($event)"
              (colorsChange)="onPhotoColorsChange($event)"
            ></app-photo-manager>
          </div>
          <!-- Clothing Name Field -->
          <div class="form-control">
            <label for="name" class="label">
              <span class="label-text">Clothing Name</span>
            </label>
            <input
              id="name"
              type="text"
              formControlName="name"
              placeholder="Enter clothing name"
              class="input input-bordered"
              [class.input-error]="clothesForm.get('name')?.invalid && clothesForm.get('name')?.touched"
              required
            />
            @if (clothesForm.get('name')?.invalid && clothesForm.get('name')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error">Name is required</span>
            </label>
            }
          </div>

          <!-- Slot Selection Field -->
          <div class="form-control">
            <label class="label">
              <span class="label-text">Slot</span>
            </label>
            <div class="flex flex-col gap-2">
              @for (slot of slotOptions; track slot) {
              <label
                [for]="'slot-' + slot"
                class="label cursor-pointer justify-start gap-3"
              >
                <input
                  [id]="'slot-' + slot"
                  type="radio"
                  formControlName="slot"
                  [value]="slot"
                  name="slot"
                  class="radio radio-primary"
                />
                <span class="label-text capitalize">{{ slot }}</span>
              </label>
              }
            </div>
            @if (clothesForm.get('slot')?.invalid && clothesForm.get('slot')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error">Please select a slot</span>
            </label>
            }
          </div>

          <!-- Submit Button -->
          <button
            type="submit"
            [disabled]="clothesForm.invalid"
            class="btn btn-primary btn-block"
          >
            Add Clothes
          </button>
        </form>
        </div>
      </div>
    </div>

    <!-- Clothes List -->
    <div>
      <h2 class="text-xl font-semibold mb-4">My Clothes</h2>
      @if (myClothes().length === 0) {
      <p class="text-sm text-base-content/70">
        No clothes in inventory yet. Add some using the form!
      </p>
      } @else {
      <div class="space-y-4">
        @for (cloth of myClothes(); track cloth.id) {
        <div class="card bg-base-100 shadow-md card-bordered">
          <div class="card-body">
            <h2 class="card-title">{{ cloth.name }}</h2>
            <p class="text-sm text-base-content/70">
              Slot: {{ cloth.slot }} â€¢ {{ cloth.is_public ? 'Public' : 'Private' }}
            </p>
            @if (cloth.images.length > 0) {
              <div class="flex gap-2 mt-2">
                @for (image of cloth.images; track image.id) {
                  <img [src]="image.signedUrl" class="w-24 h-24 object-cover rounded" alt="Clothing item"/>
                }
              </div>
            }
            <div class="card-actions justify-end mt-4">
              <button
                type="button"
                (click)="deleteClothes(cloth.id)"
                class="btn btn-error btn-sm"
                title="Delete item"
              >
                Delete
              </button>
            </div>
          </div>
        </div>
        }
      </div>
      }
    </div>
  </div>
</div>
